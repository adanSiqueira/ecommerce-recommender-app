{% extends "base.html" %}
{% block content %}

<div style="display: flex;">
<!-- Filtros laterais -->
    <aside style="width: 18%; padding: 1em; border-right: 1px solid #ccc;">
    <form method="get">
        <h3>Filtrar</h3>
        <label>Categoria:</label><br>
        <select name="category">
        <option value="">Todas</option>
        {% for cat in available_categories %}
        <option value="{{ cat }}" {% if request.args.get('category') == cat %}selected{% endif %}>{{ cat }}</option>
        {% endfor %}
        </select><br><br>

        <label>Cor:</label><br>
        <select name="color">
        <option value="">Todas</option>
        <option value="Preto" {% if request.args.get('color') == 'Preto' %}selected{% endif %}>Preto</option>
        <option value="Branco" {% if request.args.get('color') == 'Branco' %}selected{% endif %}>Branco</option>
        <option value="Azul" {% if request.args.get('color') == 'Azul' %}selected{% endif %}>Azul</option>
        <option value="Rosa" {% if request.args.get('color') == 'Rosa' %}selected{% endif %}>Rosa</option>
        <option value="Verde" {% if request.args.get('color') == 'Verde' %}selected{% endif %}>Verde</option>
        <option value="Padrão" {% if request.args.get('color') == 'Padrão' %}selected{% endif %}>Padrão</option>
        </select><br><br>

        <label>Tamanho:</label><br>
        <select name="size">
        <option value="">Todos</option>
        <option value="P" {% if request.args.get('size') == 'P' %}selected{% endif %}>P</option>
        <option value="M" {% if request.args.get('size') == 'M' %}selected{% endif %}>M</option>
        <option value="G" {% if request.args.get('size') == 'G' %}selected{% endif %}>G</option>
        </select><br><br>

        <label>Sexo:</label><br>
        <select name="gender">
        <option value="">Todos</option>
        <option value="Masculino" {% if request.args.get('gender') == 'Masculino' %}selected{% endif %}>Masculino</option>
        <option value="Feminino" {% if request.args.get('gender') == 'Feminino' %}selected{% endif %}>Feminino</option>
        <option value="Unissex" {% if request.args.get('gender') == 'Unissex' %}selected{% endif %}>Unissex</option>
        </select><br><br>

        <label>Faixa Etária:</label><br>
        <select name="age_group">
        <option value="">Todas</option>
        <option value="Adulto" {% if request.args.get('age_group') == 'Adulto' %}selected{% endif %}>Adulto</option>
        <option value="Infantil" {% if request.args.get('age_group') == 'Infantil' %}selected{% endif %}>Infantil</option>
        </select><br><br>

        <label>Estação:</label><br>
        <select name="season">
        <option value="">Todas</option>
        <option value="Inverno" {% if request.args.get('season') == 'Inverno' %}selected{% endif %}>Inverno</option>
        <option value="Verão" {% if request.args.get('season') == 'Verão' %}selected{% endif %}>Verão</option>
        <option value="Geral" {% if request.args.get('season') == 'Geral' %}selected{% endif %}>Geral</option>
        </select><br><br>

        <button type="submit">Aplicar</button>
    </form>
    </aside>


  <!-- Lista de produtos -->
  <section style="flex: 1; padding: 1em;">
    {% for category, items in categorized_products.items() %}
      <h2>{{ category }}</h2>
      <div class="product-list">
        {% for product in items %}
          <div class="product-card">
            <img src="{{ product.image }}" alt="{{ product.name }}" width="150">
            <h3>{{ product.name }}</h3>
            <p>R$ {{ "%.2f"|format(product.price) }}</p>
            <a href="{{ url_for('product_detail', product_id=product.id) }}">Ver detalhes</a> |
            <a href="{{ url_for('add_to_cart', product_id=product.id) }}">Adicionar ao carrinho</a>
          </div>
        {% endfor %}
      </div>
    {% endfor %}
  </section>
</div>

{% endblock %}
